"0",""
"0","# --- IPO-aligned dataset ---"
"0","stock_data_ipo <- stock_data %>%"
"0","group_by(symbol, era) %>%"
"0","arrange(Date, .by_group = TRUE) %>%"
"0","mutate(era_day_ipo = row_number()) %>%"
"0","ungroup()"
"0",""
"0","avg_ipo <- stock_data_ipo %>%"
"0","group_by(era, era_day_ipo) %>%"
"0","summarize(median_indexed_price = median(indexed_price, na.rm = TRUE),"
"0",".groups = ""drop"")"
"0",""
"0","avg_ipo <- avg_ipo %>%"
"0","rename(era_day = era_day_ipo) %>%"
"0","mutate(alignment = ""IPO-aligned"")"
"0",""
"0","avg_era <- average_trajectories %>%"
"0","mutate(alignment = ""Era-aligned"")"
"0",""
"0","plot_data <- bind_rows(avg_ipo, avg_era)"
"0",""
"0","# Plot both versions"
"0",""
"0","p_both <- ggplot(plot_data,"
"0","aes(x = era_day, y = median_indexed_price, color = era)) +"
"0","geom_line(size = 1) +"
"0","facet_wrap(~ alignment, ncol = 2, scales = ""free_x"") +"
"0","labs("
"0","title    = ""AI Rally vs. Dot-com Bubble"","
"0","subtitle = ""Two perspectives: IPO-aligned vs Era-aligned"","
"0","x = ""Trading Days Since Alignment Start"","
"0","y = ""Median Indexed Price"","
"0","color = ""Era"""
"0",") +"
"0","theme_minimal() +"
"0","theme("
"0","plot.title = element_text(face = ""bold"", size = 16),"
"0","legend.position = ""bottom"""
"0",")"
"0",""
"0","print(p_both)"
